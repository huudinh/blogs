"use strict";(self.webpackChunkblogs=self.webpackChunkblogs||[]).push([[2507],{3396:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"react-native/app-login/nextjs","title":"Backend v\u1edbi NextJS","description":"B\u1ea1n c\xf3 th\u1ec3 t\u1ea1o API \u0111\u01a1n gi\u1ea3n cho \u1ee9ng d\u1ee5ng v\u1edbi c\xe1c ch\u1ee9c n\u0103ng CRUD b\u1eb1ng NextJS v\xe0 Typescript","source":"@site/docs/react-native/app-login/4-nextjs.md","sourceDirName":"react-native/app-login","slug":"/react-native/app-login/nextjs","permalink":"/blogs/docs/react-native/app-login/nextjs","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"reactNativeSidebar","previous":{"title":"Login Validate","permalink":"/blogs/docs/react-native/app-login/validate"},"next":{"title":"Request API b\u1eb1ng Axios","permalink":"/blogs/docs/react-native/app-login/axios"}}');var t=r(4848),i=r(8453);const a={sidebar_position:4},d="Backend v\u1edbi NextJS",c={},o=[{value:"I. M\u1ee5c ti\xeau",id:"i-m\u1ee5c-ti\xeau",level:2},{value:"II. Code Project",id:"ii-code-project",level:2},{value:"FAQ - C\xe2u h\u1ecfi th\u01b0\u1eddng g\u1eb7p khi ph\u1ecfng v\u1ea5n",id:"faq---c\xe2u-h\u1ecfi-th\u01b0\u1eddng-g\u1eb7p-khi-ph\u1ecfng-v\u1ea5n",level:2},{value:"1. L\xe0m th\u1ebf n\xe0o \u0111\u1ec3 kh\u1edfi t\u1ea1o \u1ee9ng d\u1ee5ng NextJS",id:"1-l\xe0m-th\u1ebf-n\xe0o-\u0111\u1ec3-kh\u1edfi-t\u1ea1o-\u1ee9ng-d\u1ee5ng-nextjs",level:3},{value:"2. C\xf3 n\xean s\u1eed d\u1ee5ng nextjs l\xe0m backend?",id:"2-c\xf3-n\xean-s\u1eed-d\u1ee5ng-nextjs-l\xe0m-backend",level:3},{value:"3. Tr\u01b0\u1eddng h\u1ee3p n\xe0o kh\xf4ng n\xean s\u1eed d\u1ee5ng nextjs l\xe0m backend?",id:"3-tr\u01b0\u1eddng-h\u1ee3p-n\xe0o-kh\xf4ng-n\xean-s\u1eed-d\u1ee5ng-nextjs-l\xe0m-backend",level:3},{value:"4. T\u1ea1i sao khi d\xf9ng nextjs l\xe0m api ta n\xean k\u1ebft h\u1ee3p Next.js + TypeScript",id:"4-t\u1ea1i-sao-khi-d\xf9ng-nextjs-l\xe0m-api-ta-n\xean-k\u1ebft-h\u1ee3p-nextjs--typescript",level:3}];function l(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...n.components},{ToggleTOC:r}=e;return r||function(n,e){throw new Error("Expected "+(e?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}("ToggleTOC",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"backend-v\u1edbi-nextjs",children:"Backend v\u1edbi NextJS"})}),"\n",(0,t.jsx)(e.p,{children:"B\u1ea1n c\xf3 th\u1ec3 t\u1ea1o API \u0111\u01a1n gi\u1ea3n cho \u1ee9ng d\u1ee5ng v\u1edbi c\xe1c ch\u1ee9c n\u0103ng CRUD b\u1eb1ng NextJS v\xe0 Typescript"}),"\n",(0,t.jsx)(r,{}),"\n",(0,t.jsx)(e.h2,{id:"i-m\u1ee5c-ti\xeau",children:"I. M\u1ee5c ti\xeau"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"Kh\u1edfi t\u1ea1o \u1ee9ng d\u1ee5ng login-api"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["C\xe0i \u0111\u1eb7t Backend API ",(0,t.jsx)(e.a,{href:"http://localhost:3000/api/users",children:"http://localhost:3000/api/users"})]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"Khai b\xe1o Type User"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"L\xe0m data m\u1eabu"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"X\xe2y d\u1ef1ng ph\u01b0\u01a1ng th\u1ee9c CRUD cho API"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"ii-code-project",children:"II. Code Project"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",metastring:'title="1. T\u1ea1o file src/type/backend.d.ts"',children:"interface User {\r\n    id: number;\r\n    fullName: string;\r\n    username: string;\r\n    password: string;\r\n    age: number;\r\n};\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",metastring:'title="2. T\u1ea1o file data.json"',children:'[\r\n  {\r\n    "id": 1,\r\n    "fullName": "Quoc Viet",\r\n    "username": "Viet",\r\n    "password": "1234",\r\n    "age": 28\r\n  },\r\n  {\r\n    "id": 2,\r\n    "fullName": "Dinh Trieu",\r\n    "username": "dinh",\r\n    "password": "1234",\r\n    "age": 28\r\n  }\r\n]\r\n\n'})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-jsx",metastring:'title="3. T\u1ea1o file src/pages/api/users.ts"',children:"import { NextApiRequest, NextApiResponse } from 'next';\r\nimport fs from 'fs';\r\nimport path from 'path';\r\n\r\nconst dataFilePath = path.join(process.cwd(), 'data.json');\r\n\r\nconst readData = () => {\r\n  const jsonData = fs.readFileSync(dataFilePath, 'utf-8');\r\n  return JSON.parse(jsonData);\r\n};\r\n\r\nconst writeData = (data: User) => {\r\n  fs.writeFileSync(dataFilePath, JSON.stringify(data, null, 2));\r\n};\r\n\r\nexport default function handler(req: NextApiRequest, res: NextApiResponse) {\r\n  const { method } = req;\r\n  const { id, fullName, username, password, age } = req.body;\r\n\r\n  let users = readData();\r\n\r\n  switch (method) {\r\n    case 'GET':\r\n      if (req.query.id) {\r\n        // Tr\u1ea3 v\u1ec1 user c\u1ee5 th\u1ec3 d\u1ef1a tr\xean ID\r\n        const userId = parseInt(req.query.id as string, 10);\r\n        const user = users.find((user: User) => user.id === userId);\r\n        if (user) {\r\n          res.status(200).json(user);\r\n        } else {\r\n          res.status(404).json({ message: 'User not found' });\r\n        }\r\n      } else {\r\n        // Tr\u1ea3 v\u1ec1 danh s\xe1ch user\r\n        res.status(200).json(users);\r\n      }      \r\n      break;\r\n    case 'POST':\r\n      // Th\xeam m\u1ed9t user m\u1edbi\r\n      const maxId = users.reduce((max:number, user:User) => (user.id > max ? user.id : max), 0);\r\n      const newUser = { id: maxId + 1, fullName, username, password, age };\r\n      users.push(newUser);\r\n      writeData(users);\r\n      res.status(201).json(newUser);\r\n      break;\r\n    case 'PUT':\r\n      // S\u1eeda m\u1ed9t user\r\n      const userIndex = users.findIndex((user: User) => user.id === id);\r\n      if (userIndex !== -1) {\r\n        users[userIndex] = { id, fullName, username, password, age };\r\n        writeData(users);\r\n        res.status(200).json(users[userIndex]);\r\n      } else {\r\n        res.status(404).json({ message: 'User not found' });\r\n      }\r\n      break;\r\n    case 'DELETE':\r\n      // X\xf3a m\u1ed9t user\r\n      const updatedUsers = users.filter((user: User) => user.id !== id);\r\n      if (updatedUsers.length !== users.length) {\r\n        users = updatedUsers;\r\n        writeData(users);\r\n        res.status(200).json({ message: 'User deleted' });\r\n      } else {\r\n        res.status(404).json({ message: 'User not found' });\r\n      }\r\n      break;\r\n    default:\r\n      res.status(405).json({ message: 'Method not allowed' });\r\n      break;\r\n  }\r\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"faq---c\xe2u-h\u1ecfi-th\u01b0\u1eddng-g\u1eb7p-khi-ph\u1ecfng-v\u1ea5n",children:"FAQ - C\xe2u h\u1ecfi th\u01b0\u1eddng g\u1eb7p khi ph\u1ecfng v\u1ea5n"}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h3,{id:"1-l\xe0m-th\u1ebf-n\xe0o-\u0111\u1ec3-kh\u1edfi-t\u1ea1o-\u1ee9ng-d\u1ee5ng-nextjs",children:"1. L\xe0m th\u1ebf n\xe0o \u0111\u1ec3 kh\u1edfi t\u1ea1o \u1ee9ng d\u1ee5ng NextJS"}),"\n",(0,t.jsxs)(e.p,{children:["T\u1ea1o \u1ee9ng d\u1ee5ng nextjs ",(0,t.jsx)(e.code,{children:"npx create-next-app@latest"})]}),"\n",(0,t.jsxs)(e.p,{children:["Ch\u1ea1y \u1ee9ng d\u1ee5ng ",(0,t.jsx)(e.code,{children:"npm run dev"})]}),"\n",(0,t.jsx)(e.h3,{id:"2-c\xf3-n\xean-s\u1eed-d\u1ee5ng-nextjs-l\xe0m-backend",children:"2. C\xf3 n\xean s\u1eed d\u1ee5ng nextjs l\xe0m backend?"}),"\n",(0,t.jsx)(e.p,{children:"S\u1eed d\u1ee5ng Next.js l\xe0m backend l\xe0 m\u1ed9t l\u1ef1a ch\u1ecdn ng\xe0y c\xe0ng ph\u1ed5 bi\u1ebfn \u2014 \u0111\u1eb7c bi\u1ec7t n\u1ebfu b\u1ea1n \u0111\xe3 d\xf9ng React \u1edf frontend. Nh\u01b0ng c\xf3 n\xean hay kh\xf4ng th\xec c\xf2n t\xf9y v\xe0o m\u1ee5c ti\xeau d\u1ef1 \xe1n c\u1ee7a b\u1ea1n."}),"\n",(0,t.jsx)(e.h3,{id:"3-tr\u01b0\u1eddng-h\u1ee3p-n\xe0o-kh\xf4ng-n\xean-s\u1eed-d\u1ee5ng-nextjs-l\xe0m-backend",children:"3. Tr\u01b0\u1eddng h\u1ee3p n\xe0o kh\xf4ng n\xean s\u1eed d\u1ee5ng nextjs l\xe0m backend?"}),"\n",(0,t.jsx)(e.p,{children:"Kh\xf4ng ph\xf9 h\u1ee3p cho c\xe1c h\u1ec7 th\u1ed1ng backend ph\u1ee9c t\u1ea1p"}),"\n",(0,t.jsx)(e.p,{children:"Kh\xf3 m\u1edf r\u1ed9ng n\u1ebfu backend ph\xe1t tri\u1ec3n m\u1ea1nh"}),"\n",(0,t.jsx)(e.p,{children:"Kh\xf4ng c\xf3 middleware m\u1ea1nh nh\u01b0 Express/NestJS"}),"\n",(0,t.jsx)(e.h3,{id:"4-t\u1ea1i-sao-khi-d\xf9ng-nextjs-l\xe0m-api-ta-n\xean-k\u1ebft-h\u1ee3p-nextjs--typescript",children:"4. T\u1ea1i sao khi d\xf9ng nextjs l\xe0m api ta n\xean k\u1ebft h\u1ee3p Next.js + TypeScript"}),"\n",(0,t.jsx)(e.p,{children:"Next.js h\u1ed7 tr\u1ee3 c\u1ea3 JavaScript v\xe0 TypeScript, nh\u01b0ng TypeScript b\u1ed5 sung \u201cki\u1ec3m tra ki\u1ec3u t\u0129nh\u201d (static typing) cho JS \u2014 gi\xfap b\u1ea1n ph\xe1t hi\u1ec7n l\u1ed7i tr\u01b0\u1edbc khi ch\u1ea1y code."}),"\n",(0,t.jsx)(e.p,{children:"API c\u1ea7n \u0111\u1ed9 tin c\u1eady cao, khi b\u1ea1n vi\u1ebft API trong /pages/api/..., b\u1ea1n \u0111ang \u0111\u1ecbnh ngh\u0129a giao ti\u1ebfp gi\u1eefa client v\xe0 server. Sai ki\u1ec3u d\u1eef li\u1ec7u \u2192 bug r\u1ea5t kh\xf3 d\xf2."}),"\n",(0,t.jsx)(e.p,{children:"Khi b\u1ea1n c\xf3 nhi\u1ec1u API (users, orders, products\u2026), vi\u1ec7c \u0111\u1ecbnh ngh\u0129a type/interface gi\xfap b\u1ea1n t\xe1i s\u1eed d\u1ee5ng v\xe0 gi\u1eef \u0111\u1ed3ng nh\u1ea5t d\u1eef li\u1ec7u."}),"\n",(0,t.jsx)(e.p,{children:"Auto-complete, debug d\u1ec5"})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(l,{...n})}):l(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>a,x:()=>d});var s=r(6540);const t={},i=s.createContext(t);function a(n){const e=s.useContext(i);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:a(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);