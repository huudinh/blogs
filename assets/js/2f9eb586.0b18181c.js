"use strict";(self.webpackChunkblogs=self.webpackChunkblogs||[]).push([[8204],{584:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>l,contentTitle:()=>a,default:()=>g,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"react-native/react-native-login/delete","title":"X\xf3a ng\u01b0\u1eddi d\xf9ng v\xe0 Loading","description":"Trong m\xe0n User Manage x\xe2y d\u1ef1ng h\xe0m x\xf3a User theo Id. Th\xeam Modal th\xf4ng b\xe1o x\xf3a th\xe0nh c\xf4ng \u0111\xf4ng th\u1eddi load l\u1ea1i d\u1eef li\u1ec7u m\u1edbi nh\u1ea5t khi \u0111\xf3ng modal.","source":"@site/docs/react-native/react-native-login/10-delete.md","sourceDirName":"react-native/react-native-login","slug":"/react-native/react-native-login/delete","permalink":"/blogs/docs/react-native/react-native-login/delete","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/react-native/react-native-login/10-delete.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10},"sidebar":"reactNativeSidebar","previous":{"title":"Reload d\u1eef li\u1ec7u v\xe0 Search","permalink":"/blogs/docs/react-native/react-native-login/reload"},"next":{"title":"X\xe2y d\u1ef1ng m\xe0n h\xecnh UserInfo","permalink":"/blogs/docs/react-native/react-native-login/user-info"}}');var i=r(4848),s=r(8453);const o={sidebar_position:10},a="X\xf3a ng\u01b0\u1eddi d\xf9ng v\xe0 Loading",l={},c=[{value:"I. M\u1ee5c ti\xeau",id:"i-m\u1ee5c-ti\xeau",level:2},{value:"II. Code Project",id:"ii-code-project",level:2},{value:"FAQ - C\xe2u h\u1ecfi th\u01b0\u1eddng g\u1eb7p khi ph\u1ecfng v\u1ea5n",id:"faq---c\xe2u-h\u1ecfi-th\u01b0\u1eddng-g\u1eb7p-khi-ph\u1ecfng-v\u1ea5n",level:2},{value:"1. \u0110\u1ec3 x\xf3a ng\u01b0\u1eddi d\xf9ng b\u1ea1n c\u1ea7n th\u1ef1c hi\u1ec7n c\xe1c b\u01b0\u1edbc n\xe0o?",id:"1-\u0111\u1ec3-x\xf3a-ng\u01b0\u1eddi-d\xf9ng-b\u1ea1n-c\u1ea7n-th\u1ef1c-hi\u1ec7n-c\xe1c-b\u01b0\u1edbc-n\xe0o",level:3},{value:"2. T\u1ea1i sao c\u1ea7n t\u1ea1o component Loading?",id:"2-t\u1ea1i-sao-c\u1ea7n-t\u1ea1o-component-loading",level:3},{value:"3. ActivityIndicator l\xe0 g\xec?",id:"3-activityindicator-l\xe0-g\xec",level:3}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...n.components},{ToggleTOC:r}=e;return r||function(n,e){throw new Error("Expected "+(e?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}("ToggleTOC",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"x\xf3a-ng\u01b0\u1eddi-d\xf9ng-v\xe0-loading",children:"X\xf3a ng\u01b0\u1eddi d\xf9ng v\xe0 Loading"})}),"\n",(0,i.jsx)(e.p,{children:"Trong m\xe0n User Manage x\xe2y d\u1ef1ng h\xe0m x\xf3a User theo Id. Th\xeam Modal th\xf4ng b\xe1o x\xf3a th\xe0nh c\xf4ng \u0111\xf4ng th\u1eddi load l\u1ea1i d\u1eef li\u1ec7u m\u1edbi nh\u1ea5t khi \u0111\xf3ng modal."}),"\n",(0,i.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/XeEq5iQDEXo?rel=0",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:!0}),"\n",(0,i.jsx)(r,{}),"\n",(0,i.jsx)(e.h2,{id:"i-m\u1ee5c-ti\xeau",children:"I. M\u1ee5c ti\xeau"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Th\xeam ph\u01b0\u01a1ng th\u1ee9c x\xf3a User v\xe0o api"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Trong m\xe0n User Manage x\xe2y d\u1ef1ng h\xe0m x\xf3a User theo Id"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Th\xeam Modal th\xf4ng b\xe1o x\xf3a th\xe0nh c\xf4ng \u0111\xf4ng th\u1eddi load l\u1ea1i d\u1eef li\u1ec7u m\u1edbi nh\u1ea5t khi \u0111\xf3ng modal"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Khi x\xf3a ng\u01b0\u1eddi d\xf9ng s\u1ebd hi\u1ec3n th\u1ecb Loading"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"ii-code-project",children:"II. Code Project"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-jsx",metastring:'title="1. T\u1ea1o file src/components/Loading.jsx"',children:"import { View, Modal, StyleSheet, ActivityIndicator } from 'react-native';\r\n\r\nconst Loading = ({ visible }) => {\r\n    return (\r\n        <Modal visible={visible} transparent={true}>\r\n            <View style={styles.loading}>\r\n                <View style={styles.loadingBg}>\r\n                    <ActivityIndicator color={'#2e86c1'} size='large' />\r\n                </View>\r\n            </View>\r\n        </Modal>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    loading: {\r\n        flex: 1,\r\n        backgroundColor: 'rgba(0,0,0,.5)',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    loadingBg: {\r\n        backgroundColor: '#fff',\r\n        padding: 10,\r\n        width: 100,\r\n        height: 100,\r\n        borderRadius: 20,\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n    }\r\n})\r\n\r\nexport default Loading;\r\n\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-jsx",metastring:'title="2. S\u1eeda file src/components/api.js"',children:"import axios from 'axios';\r\n\r\nconst API_BASE_URL = 'http://10.196.61.148:3000/api';\r\n\r\nconst http = axios.create({\r\n    baseURL: API_BASE_URL,\r\n})\r\n\r\n// \u0110\u1ecdc User\r\nexport const getUser = async () => {\r\n    return await http.get(`/users`)\r\n};\r\n\r\n// X\xf3a User\r\nexport const deleteUser = async (userId) => {\r\n    return await http.delete(`/users`, {\r\n        data: { id: userId }\r\n    });\r\n};\r\n\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-jsx",metastring:'title="3. S\u1eeda file src/components/modal.js"',children:"import { View, Text, Modal, StyleSheet } from 'react-native';\r\nimport AntDesign from '@expo/vector-icons/AntDesign';\r\n\r\nconst SysModal = (props) => {\r\n    const { modalVisible, setModalVisible, message } = props;\r\n    return (\r\n        <>\r\n            <Modal\r\n                animationType=\"slide\"\r\n                transparent={true}\r\n                visible={modalVisible}\r\n            >\r\n                <View style={styles.container}>\r\n                    <View style={styles.modalBox}>\r\n                        <View style={styles.header}>\r\n                            <Text style={styles.headerText}>Th\xf4ng b\xe1o</Text>\r\n                            <AntDesign \r\n                                name=\"close\" size={14} color=\"black\" \r\n                                onPress={() => setModalVisible(false)}\r\n                            />\r\n                        </View>\r\n                        <View style={styles.body} >\r\n                            <Text style={styles.bodyText}>{message}</Text>\r\n                        </View>\r\n                    </View>\r\n                </View>\r\n            </Modal>\r\n        </>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        backgroundColor: 'rgba(0,0,0,.3)',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        padding: 20,\r\n    },\r\n    modalBox: {\r\n        backgroundColor: '#fff',\r\n        width: '100%',\r\n        borderRadius: 10,\r\n        padding: 20,\r\n        marginTop:'-30%',\r\n    },\r\n    header: {\r\n        flexDirection: 'row',\r\n        paddingBottom: 10,\r\n        justifyContent: 'space-between',\r\n        borderBottomWidth: 1,\r\n        borderBottomColor: '#ccc',\r\n        alignItems: 'center',\r\n    },\r\n    headerText: {\r\n        fontWeight: 'bold',\r\n        fontSize: 18,\r\n    },\r\n    body:{\r\n        paddingVertical: 20,\r\n    },\r\n    bodyText: {\r\n        fontSize: 16,\r\n        color: '#666',\r\n    },\r\n   \r\n});\r\n\r\nexport default SysModal;\r\n\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-jsx",metastring:'title="4. S\u1eeda file src/screens/user_manage/index.js"',children:"import AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { View, Text, StyleSheet, FlatList, Image, TextInput, TouchableOpacity } from 'react-native';\r\nimport { useEffect, useState } from 'react';\r\nimport { deleteUser, getUser } from '../../components/api';\r\nimport AntDesign from '@expo/vector-icons/AntDesign';\r\nimport SysModal from '../../components/modal';\r\nimport Loading from '../../components/Loading';\r\n\r\nconst UserManage = () => {\r\n    const [userList, setUserList] = useState([]);\r\n    const [keySearch, setKeySearch] = useState('');\r\n\r\n    // State \u0111\u1ec3 qu\u1ea3n l\xfd modal\r\n    const [modalVisible, setModalVisible] = useState(false);\r\n    const [message, setMessage] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const handleSearch = (text) => setKeySearch(text);\r\n\r\n    // Load danh s\xe1ch User t\u1eeb AsyncStorage khi component \u0111\u01b0\u1ee3c mount\r\n    useEffect(() => {\r\n        AsyncStorage.getItem('UserList')\r\n            .then( result => {\r\n                if (result) {\r\n                    setUserList(JSON.parse(result));\r\n                }\r\n            })\r\n    }, []);\r\n\r\n    // H\xe0m load l\u1ea1i d\u1eef li\u1ec7u t\u1eeb API\r\n    const getData = () => {\r\n        getUser()\r\n        .then(response => {\r\n            // L\u01b0u danh s\xe1ch User v\xe0o AsyncStorage\r\n            AsyncStorage.setItem('UserList', JSON.stringify(response.data));\r\n\r\n            // C\u1eadp nh\u1eadt l\u1ea1i danh sach User trong state\r\n            setUserList(response.data);\r\n        })\r\n        .catch(error => {\r\n            console.error('Error fetching data:', error);\r\n        });\r\n    }\r\n\r\n    // X\xf3a User theo ID\r\n    const handlerDelete = (id) => {\r\n        try {\r\n            setIsLoading(true);\r\n            setTimeout(()=>{\r\n                deleteUser(id)\r\n                .then(res => {\r\n                    setModalVisible(true);\r\n                    setIsLoading(false);\r\n                    setMessage('B\u1ea1n \u0111\xe3 x\xf3a th\xe0nh c\xf4ng User.');\r\n                    getData();\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error fetching data:', error);\r\n                });\r\n            }, 3000);\r\n        } catch (error) {\r\n            setIsLoading(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <View style={styles.container}>\r\n            <SysModal \r\n                modalVisible={modalVisible}\r\n                setModalVisible={setModalVisible}\r\n                message={message}\r\n            />\r\n            <Loading visible={isLoading} />\r\n            <View style={styles.title}>\r\n                <Text style={styles.titleText}>User Management</Text>\r\n            </View>\r\n            <View style={styles.search}>\r\n                <View style={styles.searchBox}>\r\n                    <TextInput \r\n                        style={styles.searchInput} \r\n                        placeholder='Enter your key Search' \r\n                        onChangeText={handleSearch} value={keySearch} />\r\n                    <AntDesign \r\n                        style={styles.searchIcon} \r\n                        name=\"search1\" size={20} color=\"black\" />\r\n                </View>\r\n            </View>\r\n            <FlatList \r\n                refreshing={false}\r\n                onRefresh={() => getData()}\r\n                data={userList.filter(\r\n                    user => user.fullName.toLowerCase().search(keySearch.toLowerCase()) > -1\r\n                )}\r\n                keyExtractor={user => user.id.toString()}\r\n                renderItem={({item: user}) => {\r\n                    const gender = user.gender === 'male' ? 'boy' : 'girl';\r\n                    return (\r\n                        <View style={styles.userItem}>\r\n                            <View> \r\n                                <Image \r\n                                    style={styles.userImage}\r\n                                    source={{\r\n                                        uri: `https://avatar.iran.liara.run/public/${gender}?username=[${user.id}]`\r\n                                    }} \r\n                                />\r\n                            </View>\r\n                            <View style={styles.userInfo}>\r\n                                <Text style={styles.userName}>{user.fullName} </Text>\r\n                                <Text>Age: {user.age} </Text>\r\n                            </View>\r\n                            <View>\r\n                                <TouchableOpacity \r\n                                    onPress={() => handlerDelete(user.id)}\r\n                                    style={styles.delete}>\r\n                                    <AntDesign name=\"delete\" size={20} color=\"white\" />\r\n                                </TouchableOpacity>\r\n                            </View>\r\n                        </View>\r\n                    )\r\n                }}\r\n            />\r\n        </View>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        paddingTop: 50,\r\n    },\r\n    title: {\r\n        padding: 10,\r\n    },\r\n    titleText: {\r\n        fontSize: 20,\r\n        fontWeight: 'bold',\r\n        color: '#192f6a',\r\n    },\r\n    search:{\r\n        padding: 10,\r\n    },\r\n    searchBox: {\r\n        flexDirection: 'row',\r\n        backgroundColor: '#fff',\r\n        borderRadius: 10,\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    searchInput: {\r\n        flex: 1,\r\n        marginLeft: 10,\r\n    },\r\n    searchIcon: {\r\n        padding: 10,\r\n    },\r\n    userItem: {\r\n        padding: 10,\r\n        borderRadius: 10,\r\n        backgroundColor: '#fff',\r\n        marginBottom: 10,\r\n        flexDirection: 'row',\r\n        alignItems: 'center',\r\n        marginHorizontal: 10,\r\n    },\r\n    userImage: {\r\n        width: 80,\r\n        height: 80,\r\n    },\r\n    userInfo: {\r\n        padding: 10,\r\n        flex: 1,\r\n    },\r\n    userName: {\r\n        fontSize: 16,\r\n        fontWeight: 'bold',\r\n        color: '#192f6a',\r\n        marginBottom: 5,\r\n    },\r\n    delete: {\r\n        backgroundColor: '#c00',\r\n        borderRadius: 5,\r\n        width:30,\r\n        height: 30,\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n    }\r\n});\r\n\r\nexport default UserManage;\r\n\n"})}),"\n",(0,i.jsx)(e.h2,{id:"faq---c\xe2u-h\u1ecfi-th\u01b0\u1eddng-g\u1eb7p-khi-ph\u1ecfng-v\u1ea5n",children:"FAQ - C\xe2u h\u1ecfi th\u01b0\u1eddng g\u1eb7p khi ph\u1ecfng v\u1ea5n"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"1-\u0111\u1ec3-x\xf3a-ng\u01b0\u1eddi-d\xf9ng-b\u1ea1n-c\u1ea7n-th\u1ef1c-hi\u1ec7n-c\xe1c-b\u01b0\u1edbc-n\xe0o",children:"1. \u0110\u1ec3 x\xf3a ng\u01b0\u1eddi d\xf9ng b\u1ea1n c\u1ea7n th\u1ef1c hi\u1ec7n c\xe1c b\u01b0\u1edbc n\xe0o?"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"G\u1ecdi h\xe0m x\xf3a User theo ID"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"T\u1ea1o n\xfat x\xf3a tr\xean giao di\u1ec7n"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Hi\u1ec3n th\u1ecb Loading khi \u0111ang x\xf3a"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"G\u1ecdi API x\xf3a v\xe0 x\u1eed l\xfd k\u1ebft qu\u1ea3"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"C\u1eadp nh\u1eadt giao di\u1ec7n sau khi x\xf3a"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"2-t\u1ea1i-sao-c\u1ea7n-t\u1ea1o-component-loading",children:"2. T\u1ea1i sao c\u1ea7n t\u1ea1o component Loading?"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Khi x\xf3a ng\u01b0\u1eddi d\xf9ng, \u1ee9ng d\u1ee5ng s\u1ebd g\u1eedi request \u0111\u1ebfn server \u2192 c\u1ea7n m\u1ed9t kho\u1ea3ng th\u1eddi gian \u0111\u1ec3 nh\u1eadn ph\u1ea3n h\u1ed3i. N\u1ebfu kh\xf4ng c\xf3 Loading, ng\u01b0\u1eddi d\xf9ng s\u1ebd kh\xf4ng bi\u1ebft \u1ee9ng d\u1ee5ng \u0111ang x\u1eed l\xfd hay b\u1ecb treo. Loading gi\xfap h\u1ecd th\u1ea5y r\xf5 h\u1ec7 th\u1ed1ng \u0111ang b\u1eadn v\xe0 c\u1ea7n ch\u1edd."}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Khi Loading hi\u1ec3n th\u1ecb, ng\u01b0\u1eddi d\xf9ng s\u1ebd kh\xf4ng ti\u1ebfp t\u1ee5c b\u1ea5m x\xf3a nhi\u1ec1u l\u1ea7n, gi\u1ea3m nguy c\u01a1 g\u1eedi nhi\u1ec1u request tr\xf9ng nhau. \u0110i\u1ec1u n\xe0y gi\xfap gi\u1eef d\u1eef li\u1ec7u nh\u1ea5t qu\xe1n v\xe0 gi\u1ea3m t\u1ea3i cho server."}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Vi\u1ec7c t\u1ea1o m\u1ed9t component Loading ri\xeang (Loading.jsx) gi\xfap b\u1ea1n c\xf3 th\u1ec3 s\u1eed d\u1ee5ng n\xf3 kh\xf4ng ch\u1ec9 trong x\xf3a user m\xe0 c\xf2n trong c\xe1c thao t\xe1c kh\xe1c (v\xed d\u1ee5: l\u01b0u d\u1eef li\u1ec7u, upload file\u2026)."}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["Ti\u1ebft ki\u1ec7m th\u1eddi gian v\xe0 code ng\u1eafn g\u1ecdn, ch\u1ec9 c\u1ea7n truy\u1ec1n props visible=",1/0," \u0111\u1ec3 \u0111i\u1ec1u khi\u1ec3n hi\u1ec3n th\u1ecb."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"3-activityindicator-l\xe0-g\xec",children:"3. ActivityIndicator l\xe0 g\xec?"}),"\n",(0,i.jsx)(e.p,{children:"ActivityIndicator l\xe0 m\u1ed9t component c\xf3 s\u1eb5n c\u1ee7a React Native d\xf9ng \u0111\u1ec3 hi\u1ec3n th\u1ecb bi\u1ec3u t\u01b0\u1ee3ng t\u1ea3i (loading spinner)."}),"\n",(0,i.jsx)(e.p,{children:"N\xf3 th\u01b0\u1eddng \u0111\u01b0\u1ee3c d\xf9ng khi \u1ee9ng d\u1ee5ng \u0111ang x\u1eed l\xfd d\u1eef li\u1ec7u (g\u1ecdi API, t\u1ea3i file, x\u1eed l\xfd t\xe1c v\u1ee5 n\u1eb7ng\u2026) \u0111\u1ec3 th\xf4ng b\xe1o cho ng\u01b0\u1eddi d\xf9ng r\u1eb1ng h\u1ec7 th\u1ed1ng \u0111ang b\u1eadn."}),"\n",(0,i.jsx)(e.p,{children:"Ho\u1ea1t \u0111\u1ed9ng \u0111\u01b0\u1ee3c tr\xean c\u1ea3 Android v\xe0 iOS."})]})}function g(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>o,x:()=>a});var t=r(6540);const i={},s=t.createContext(i);function o(n){const e=t.useContext(s);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),t.createElement(s.Provider,{value:e},n.children)}}}]);